<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>IM: im.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.1 -->
<div class="header">
  <div class="headertitle">
<h1>im.h</h1>  </div>
</div>
<div class="contents">
<a href="im_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/** \file</span>
<a name="l00002"></a>00002 <span class="comment"> * \brief Main API</span>
<a name="l00003"></a>00003 <span class="comment"> *</span>
<a name="l00004"></a>00004 <span class="comment"> * See Copyright Notice in im_lib.h</span>
<a name="l00005"></a>00005 <span class="comment"> */</span>
<a name="l00006"></a>00006 
<a name="l00007"></a>00007 <span class="preprocessor">#ifndef __IM_H</span>
<a name="l00008"></a>00008 <span class="preprocessor"></span><span class="preprocessor">#define __IM_H</span>
<a name="l00009"></a>00009 <span class="preprocessor"></span>
<a name="l00010"></a>00010 <span class="preprocessor">#if     defined(__cplusplus)</span>
<a name="l00011"></a>00011 <span class="preprocessor"></span><span class="keyword">extern</span> <span class="stringliteral">&quot;C&quot;</span> {
<a name="l00012"></a>00012 <span class="preprocessor">#endif</span>
<a name="l00013"></a>00013 <span class="preprocessor"></span>      
<a name="l00014"></a>00014 <span class="comment"></span>
<a name="l00015"></a>00015 <span class="comment">/** Image data type descriptors. \n</span>
<a name="l00016"></a>00016 <span class="comment"> * See also \ref datatypeutl.</span>
<a name="l00017"></a>00017 <span class="comment"> * \ingroup imagerep */</span>
<a name="l00018"></a><a class="code" href="group__imagerep.html#ga668c1a57f579817842a4777a141b0b1d">00018</a> <span class="keyword">enum</span> <a class="code" href="group__imagerep.html#ga668c1a57f579817842a4777a141b0b1d">imDataType</a>
<a name="l00019"></a>00019 {
<a name="l00020"></a><a class="code" href="group__imagerep.html#gga668c1a57f579817842a4777a141b0b1dafdac6af4428879f9a72250673314b001">00020</a>   IM_BYTE,   <span class="comment">/**&lt; &quot;unsigned char&quot;. 1 byte from 0 to 255.                  */</span>
<a name="l00021"></a><a class="code" href="group__imagerep.html#gga668c1a57f579817842a4777a141b0b1da3d51d7b48d6e43c792cd0dd1ba729ae1">00021</a>   IM_SHORT,  <span class="comment">/**&lt; &quot;short&quot;. 2 bytes from -32,768 to 32,767.                */</span>
<a name="l00022"></a><a class="code" href="group__imagerep.html#gga668c1a57f579817842a4777a141b0b1dacf03f9d58b5d0e32540e691f23964fd0">00022</a>   IM_USHORT, <span class="comment">/**&lt; &quot;unsigned short&quot;. 2 bytes from 0 to 65,535.             */</span>
<a name="l00023"></a><a class="code" href="group__imagerep.html#gga668c1a57f579817842a4777a141b0b1dafe4d7d3b636f26c1f749891595569af2">00023</a>   IM_INT,    <span class="comment">/**&lt; &quot;int&quot;. 4 bytes from -2,147,483,648 to 2,147,483,647.    */</span>
<a name="l00024"></a><a class="code" href="group__imagerep.html#gga668c1a57f579817842a4777a141b0b1daae52d761674dc9a9252f5573f4265971">00024</a>   IM_FLOAT,  <span class="comment">/**&lt; &quot;float&quot;. 4 bytes single precision IEEE floating point.  */</span>
<a name="l00025"></a><a class="code" href="group__imagerep.html#gga668c1a57f579817842a4777a141b0b1da10c7779cb28b0a5f1fd6f31da3b2d278">00025</a>   <a class="code" href="group__imagerep.html#gga668c1a57f579817842a4777a141b0b1da10c7779cb28b0a5f1fd6f31da3b2d278">IM_CFLOAT</a>  <span class="comment">/**&lt; complex &quot;float&quot;. 2 float values in sequence, real and imaginary parts.   */</span>
<a name="l00026"></a>00026 };
<a name="l00027"></a>00027 <span class="comment"></span>
<a name="l00028"></a>00028 <span class="comment">/** Image color mode color space descriptors (first byte). \n</span>
<a name="l00029"></a>00029 <span class="comment"> * See also \ref colormodeutl.</span>
<a name="l00030"></a>00030 <span class="comment"> * \ingroup imagerep */</span>
<a name="l00031"></a><a class="code" href="group__imagerep.html#ga5e76d77a302a5484c9c5e2b499ebda0f">00031</a> <span class="keyword">enum</span> <a class="code" href="group__imagerep.html#ga5e76d77a302a5484c9c5e2b499ebda0f">imColorSpace</a>
<a name="l00032"></a>00032 {
<a name="l00033"></a><a class="code" href="group__imagerep.html#gga5e76d77a302a5484c9c5e2b499ebda0fa9ca17fa5dd7041b536e692bfa1de38d4">00033</a>   IM_RGB,    <span class="comment">/**&lt; Red, Green and Blue (nonlinear).              */</span>
<a name="l00034"></a><a class="code" href="group__imagerep.html#gga5e76d77a302a5484c9c5e2b499ebda0fa952d0b9b1493568e81e5a25e814bd49c">00034</a>   IM_MAP,    <span class="comment">/**&lt; Indexed by RGB color map (data_type=IM_BYTE). */</span>
<a name="l00035"></a><a class="code" href="group__imagerep.html#gga5e76d77a302a5484c9c5e2b499ebda0fa9eac8a25bd39c0c92ec6de8f07dfa898">00035</a>   IM_GRAY,   <span class="comment">/**&lt; Shades of gray, luma (nonlinear Luminance), or an intensity value that is not related to color. */</span>
<a name="l00036"></a><a class="code" href="group__imagerep.html#gga5e76d77a302a5484c9c5e2b499ebda0fac417f92fb4a13312210fcf33d4699221">00036</a>   IM_BINARY, <span class="comment">/**&lt; Indexed by 2 colors: black (0) and white (1) (data_type=IM_BYTE).     */</span>
<a name="l00037"></a><a class="code" href="group__imagerep.html#gga5e76d77a302a5484c9c5e2b499ebda0fa7055efa9b73ada7540809284585720ad">00037</a>   IM_CMYK,   <span class="comment">/**&lt; Cian, Magenta, Yellow and Black (nonlinear).                          */</span>
<a name="l00038"></a><a class="code" href="group__imagerep.html#gga5e76d77a302a5484c9c5e2b499ebda0fa3b911d6d8265f733c298cdb51d7e785a">00038</a>   IM_YCBCR,  <span class="comment">/**&lt; ITU-R 601 Y&#39;CbCr. Y&#39; is luma (nonlinear Luminance).                   */</span>
<a name="l00039"></a><a class="code" href="group__imagerep.html#gga5e76d77a302a5484c9c5e2b499ebda0fa9cdbfeb03e1fc9c99472000e9f622d6a">00039</a>   IM_LAB,    <span class="comment">/**&lt; CIE L*a*b*. L* is Lightness (nonlinear Luminance, nearly perceptually uniform). */</span>
<a name="l00040"></a><a class="code" href="group__imagerep.html#gga5e76d77a302a5484c9c5e2b499ebda0fa4fba3dc282513e61c8104a24fc7f765b">00040</a>   IM_LUV,    <span class="comment">/**&lt; CIE L*u*v*. L* is Lightness (nonlinear Luminance, nearly perceptually uniform). */</span>
<a name="l00041"></a><a class="code" href="group__imagerep.html#gga5e76d77a302a5484c9c5e2b499ebda0faf812f15436ee4e6bf44f9c31c18260f5">00041</a>   <a class="code" href="group__imagerep.html#gga5e76d77a302a5484c9c5e2b499ebda0faf812f15436ee4e6bf44f9c31c18260f5">IM_XYZ</a>     <span class="comment">/**&lt; CIE XYZ. Linear Light Tristimulus, Y is linear Luminance.             */</span>
<a name="l00042"></a>00042 };
<a name="l00043"></a>00043 <span class="comment"></span>
<a name="l00044"></a>00044 <span class="comment">/** Image color mode configuration/extra descriptors (1 bit each in the second byte). \n</span>
<a name="l00045"></a>00045 <span class="comment"> * See also \ref colormodeutl.</span>
<a name="l00046"></a>00046 <span class="comment"> * \ingroup imagerep */</span>
<a name="l00047"></a><a class="code" href="group__imagerep.html#ga286f44e2970f46b77ff145b1521c5961">00047</a> <span class="keyword">enum</span> <a class="code" href="group__imagerep.html#ga286f44e2970f46b77ff145b1521c5961">imColorModeConfig</a>
<a name="l00048"></a>00048 {
<a name="l00049"></a><a class="code" href="group__imagerep.html#gga286f44e2970f46b77ff145b1521c5961ac7730f989b66f91997db5d0630da3ae1">00049</a>   <a class="code" href="group__imagerep.html#gga286f44e2970f46b77ff145b1521c5961ac7730f989b66f91997db5d0630da3ae1">IM_ALPHA</a>    = 0x100,  <span class="comment">/**&lt; adds an Alpha channel */</span>
<a name="l00050"></a><a class="code" href="group__imagerep.html#gga286f44e2970f46b77ff145b1521c5961abab3f90a04597b504bd417e802c37ec2">00050</a>   <a class="code" href="group__imagerep.html#gga286f44e2970f46b77ff145b1521c5961abab3f90a04597b504bd417e802c37ec2">IM_PACKED</a>   = 0x200,  <span class="comment">/**&lt; packed components (rgbrgbrgb...) */</span>
<a name="l00051"></a><a class="code" href="group__imagerep.html#gga286f44e2970f46b77ff145b1521c5961a85ce43c12b0127ce8d33af2721ac0b24">00051</a>   <a class="code" href="group__imagerep.html#gga286f44e2970f46b77ff145b1521c5961a85ce43c12b0127ce8d33af2721ac0b24">IM_TOPDOWN</a>  = 0x400   <span class="comment">/**&lt; orientation from top down to bottom */</span>
<a name="l00052"></a>00052 };
<a name="l00053"></a>00053 
<a name="l00054"></a>00054 
<a name="l00055"></a>00055 <span class="comment"></span>
<a name="l00056"></a>00056 <span class="comment">/** File Access Error Codes</span>
<a name="l00057"></a>00057 <span class="comment"> * \par</span>
<a name="l00058"></a>00058 <span class="comment"> * In Lua use im.ErrorStr(err) to convert the error number into a string.</span>
<a name="l00059"></a>00059 <span class="comment"> * \ingroup file */</span>
<a name="l00060"></a><a class="code" href="group__file.html#ga5259a88d1d9299b782efa0ae2a461056">00060</a> <span class="keyword">enum</span> <a class="code" href="group__file.html#ga5259a88d1d9299b782efa0ae2a461056">imErrorCodes</a>       
<a name="l00061"></a>00061 {
<a name="l00062"></a><a class="code" href="group__file.html#gga5259a88d1d9299b782efa0ae2a461056aacefa5295aadef1888dd6d9df05ccc50">00062</a>   IM_ERR_NONE,     <span class="comment">/**&lt; No error. */</span>
<a name="l00063"></a><a class="code" href="group__file.html#gga5259a88d1d9299b782efa0ae2a461056a9a39f4006f898658b8a84dab17c110fa">00063</a>   IM_ERR_OPEN,     <span class="comment">/**&lt; Error while opening the file (read or write). */</span>
<a name="l00064"></a><a class="code" href="group__file.html#gga5259a88d1d9299b782efa0ae2a461056aa91028db09d089422a498e0eda79087e">00064</a>   IM_ERR_ACCESS,   <span class="comment">/**&lt; Error while accessing the file (read or write). */</span>
<a name="l00065"></a><a class="code" href="group__file.html#gga5259a88d1d9299b782efa0ae2a461056a6ed0bfcfe809cf79b27e5070d3da50bc">00065</a>   IM_ERR_FORMAT,   <span class="comment">/**&lt; Invalid or unrecognized file format. */</span>
<a name="l00066"></a><a class="code" href="group__file.html#gga5259a88d1d9299b782efa0ae2a461056ac46679e09115f18e172648afb081d709">00066</a>   IM_ERR_DATA,     <span class="comment">/**&lt; Invalid or unsupported data. */</span>
<a name="l00067"></a><a class="code" href="group__file.html#gga5259a88d1d9299b782efa0ae2a461056a8a09221529b9a96720758ea177930ecf">00067</a>   IM_ERR_COMPRESS, <span class="comment">/**&lt; Invalid or unsupported compression. */</span>
<a name="l00068"></a><a class="code" href="group__file.html#gga5259a88d1d9299b782efa0ae2a461056ae55c4b754338c929f338906ffa5916a2">00068</a>   IM_ERR_MEM,      <span class="comment">/**&lt; Insuficient memory */</span>
<a name="l00069"></a><a class="code" href="group__file.html#gga5259a88d1d9299b782efa0ae2a461056aea9e4d3f7e7464340361a3fe92c71f09">00069</a>   <a class="code" href="group__file.html#gga5259a88d1d9299b782efa0ae2a461056aea9e4d3f7e7464340361a3fe92c71f09">IM_ERR_COUNTER</a>   <span class="comment">/**&lt; Interrupted by the counter */</span>
<a name="l00070"></a>00070 };
<a name="l00071"></a>00071 <span class="comment"></span>
<a name="l00072"></a>00072 <span class="comment">/** \brief Image File Structure (Private).</span>
<a name="l00073"></a>00073 <span class="comment"> * \ingroup file */</span>
<a name="l00074"></a><a class="code" href="group__file.html#gada2ca27c9f8f174a2fc2a0ced96d31cf">00074</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="struct__imFile.html" title="Image File Structure (SDK Use Only).">_imFile</a> <a class="code" href="struct__imFile.html" title="Image File Structure (SDK Use Only).">imFile</a>;
<a name="l00075"></a>00075 <span class="comment"></span>
<a name="l00076"></a>00076 <span class="comment">/** Opens the file for reading. It must exists. Also reads file header.</span>
<a name="l00077"></a>00077 <span class="comment"> * It will try to identify the file format.</span>
<a name="l00078"></a>00078 <span class="comment"> * See also \ref imErrorCodes. \n</span>
<a name="l00079"></a>00079 <span class="comment"> * In Lua the IM file metatable name is &quot;imFile&quot;.</span>
<a name="l00080"></a>00080 <span class="comment"> * When converted to a string will return &quot;imFile(%p)&quot; where %p is replaced by the userdata address.</span>
<a name="l00081"></a>00081 <span class="comment"> * If the file is already closed by im.FileClose, then it will return also the suffix &quot;-closed&quot;.</span>
<a name="l00082"></a>00082 <span class="comment"> *</span>
<a name="l00083"></a>00083 <span class="comment"> * \verbatim im.FileOpen(file_name: string) -&gt; ifile: imFile, error: number [in Lua 5] \endverbatim</span>
<a name="l00084"></a>00084 <span class="comment"> * \ingroup file */</span>
<a name="l00085"></a>00085 <a class="code" href="struct__imFile.html" title="Image File Structure (SDK Use Only).">imFile</a>* <a class="code" href="group__file.html#ga6b0a4677b3bfdf34b864e1c134fa3b44">imFileOpen</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* file_name, <span class="keywordtype">int</span> *error);
<a name="l00086"></a>00086 <span class="comment"></span>
<a name="l00087"></a>00087 <span class="comment">/** Opens the file for reading using a specific format. It must exists. Also reads file header.</span>
<a name="l00088"></a>00088 <span class="comment"> * See also \ref imErrorCodes and \ref format.</span>
<a name="l00089"></a>00089 <span class="comment"> *</span>
<a name="l00090"></a>00090 <span class="comment"> * \verbatim im.FileOpenAs(file_name, format: string) -&gt; ifile: imFile, error: number [in Lua 5] \endverbatim</span>
<a name="l00091"></a>00091 <span class="comment"> * \ingroup file */</span>
<a name="l00092"></a>00092 <a class="code" href="struct__imFile.html" title="Image File Structure (SDK Use Only).">imFile</a>* <a class="code" href="group__file.html#gaf0904597eb4d31424fa06d7bd350ce7b">imFileOpenAs</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* file_name, <span class="keyword">const</span> <span class="keywordtype">char</span>* format, <span class="keywordtype">int</span> *error);
<a name="l00093"></a>00093 <span class="comment"></span>
<a name="l00094"></a>00094 <span class="comment">/** Creates a new file for writing using a specific format. If the file exists will be replaced. \n</span>
<a name="l00095"></a>00095 <span class="comment"> * It will only initialize the format driver and create the file, no data is actually written.</span>
<a name="l00096"></a>00096 <span class="comment"> * See also \ref imErrorCodes and \ref format.</span>
<a name="l00097"></a>00097 <span class="comment"> *</span>
<a name="l00098"></a>00098 <span class="comment"> * \verbatim im.FileNew(file_name: string, format: string) -&gt; ifile: imFile, error: number [in Lua 5] \endverbatim</span>
<a name="l00099"></a>00099 <span class="comment"> * \ingroup file */</span>
<a name="l00100"></a>00100 <a class="code" href="struct__imFile.html" title="Image File Structure (SDK Use Only).">imFile</a>* <a class="code" href="group__file.html#gaa08d4f8cca2b49f7882c0c39e0ea251f">imFileNew</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* file_name, <span class="keyword">const</span> <span class="keywordtype">char</span>* format, <span class="keywordtype">int</span> *error);
<a name="l00101"></a>00101 <span class="comment"></span>
<a name="l00102"></a>00102 <span class="comment">/** Closes the file. \n</span>
<a name="l00103"></a>00103 <span class="comment"> * In Lua if this function is not called, the file is closed by the garbage collector.</span>
<a name="l00104"></a>00104 <span class="comment"> *</span>
<a name="l00105"></a>00105 <span class="comment"> * \verbatim im.FileClose(ifile: imFile) [in Lua 5] \endverbatim</span>
<a name="l00106"></a>00106 <span class="comment"> * \verbatim ifile:Close() [in Lua 5] \endverbatim</span>
<a name="l00107"></a>00107 <span class="comment"> * \ingroup file */</span>
<a name="l00108"></a>00108 <span class="keywordtype">void</span> <a class="code" href="group__file.html#ga1ff0e532c94f50c5f0e9aecccbc1ce3d">imFileClose</a>(<a class="code" href="struct__imFile.html" title="Image File Structure (SDK Use Only).">imFile</a>* ifile);  
<a name="l00109"></a>00109 <span class="comment"></span>
<a name="l00110"></a>00110 <span class="comment">/** Returns an internal handle.</span>
<a name="l00111"></a>00111 <span class="comment"> * index=0 returns always an imBinFile* handle, </span>
<a name="l00112"></a>00112 <span class="comment"> * but for some formats returns NULL because they do not use imBinFile (like AVI and WMV).</span>
<a name="l00113"></a>00113 <span class="comment"> * index=1 return an internal structure used by the format, usually is a handle </span>
<a name="l00114"></a>00114 <span class="comment"> * to a third party library structure. This is file format dependent.</span>
<a name="l00115"></a>00115 <span class="comment"> *</span>
<a name="l00116"></a>00116 <span class="comment"> * \verbatim ifile:Handle() -&gt; handle: userdata [in Lua 5] \endverbatim</span>
<a name="l00117"></a>00117 <span class="comment"> * \ingroup file */</span>
<a name="l00118"></a>00118 <span class="keywordtype">void</span>* <a class="code" href="group__file.html#gaee859e10f162d05fbb749086115d76e6">imFileHandle</a>(<a class="code" href="struct__imFile.html" title="Image File Structure (SDK Use Only).">imFile</a>* ifile, <span class="keywordtype">int</span> index);  
<a name="l00119"></a>00119 <span class="comment"></span>
<a name="l00120"></a>00120 <span class="comment">/** Returns file information. </span>
<a name="l00121"></a>00121 <span class="comment"> * image_count is the number of images in a stack or </span>
<a name="l00122"></a>00122 <span class="comment"> * the number of frames in a video/animation or the depth of a volume data. \n</span>
<a name="l00123"></a>00123 <span class="comment"> * compression and image_count can be NULL. \n</span>
<a name="l00124"></a>00124 <span class="comment"> * These informations are also available as attributes:</span>
<a name="l00125"></a>00125 <span class="comment"> * \verbatim FileFormat (string) \endverbatim</span>
<a name="l00126"></a>00126 <span class="comment"> * \verbatim FileCompression (string) \endverbatim</span>
<a name="l00127"></a>00127 <span class="comment"> * \verbatim FileImageCount IM_INT (1) \endverbatim</span>
<a name="l00128"></a>00128 <span class="comment"> * See also \ref format.</span>
<a name="l00129"></a>00129 <span class="comment"> *</span>
<a name="l00130"></a>00130 <span class="comment"> * \verbatim ifile:GetInfo() -&gt; format: string, compression: string, image_count: number [in Lua 5] \endverbatim</span>
<a name="l00131"></a>00131 <span class="comment"> * \ingroup file */</span>
<a name="l00132"></a>00132 <span class="keywordtype">void</span> <a class="code" href="group__file.html#gabba47b076ad962c8e67e023336c9ebf5">imFileGetInfo</a>(<a class="code" href="struct__imFile.html" title="Image File Structure (SDK Use Only).">imFile</a>* ifile, <span class="keywordtype">char</span>* format, <span class="keywordtype">char</span>* compression, <span class="keywordtype">int</span> *image_count);
<a name="l00133"></a>00133 <span class="comment"></span>
<a name="l00134"></a>00134 <span class="comment">/** Changes the write compression method. \n</span>
<a name="l00135"></a>00135 <span class="comment"> * If the compression is not supported will return an error code when writting. \n</span>
<a name="l00136"></a>00136 <span class="comment"> * Use NULL to set the default compression. You can use the imFileGetInfo to retrieve the actual compression</span>
<a name="l00137"></a>00137 <span class="comment"> * but only after \ref imFileWriteImageInfo. Only a few formats allow you to change the compression between frames.</span>
<a name="l00138"></a>00138 <span class="comment"> *</span>
<a name="l00139"></a>00139 <span class="comment"> * \verbatim ifile:SetInfo(compression: string) [in Lua 5] \endverbatim</span>
<a name="l00140"></a>00140 <span class="comment"> * \ingroup file */</span>
<a name="l00141"></a>00141 <span class="keywordtype">void</span> <a class="code" href="group__file.html#ga41bc244e3ed6db2aafefdb3291279454">imFileSetInfo</a>(<a class="code" href="struct__imFile.html" title="Image File Structure (SDK Use Only).">imFile</a>* ifile, <span class="keyword">const</span> <span class="keywordtype">char</span>* compression);
<a name="l00142"></a>00142 <span class="comment"></span>
<a name="l00143"></a>00143 <span class="comment">/** Changes an extended attribute. \n</span>
<a name="l00144"></a>00144 <span class="comment"> * The data will be internally duplicated. \n</span>
<a name="l00145"></a>00145 <span class="comment"> * If data is NULL the attribute is removed. </span>
<a name="l00146"></a>00146 <span class="comment"> * If data_type is BYTE then count can be -1 to indicate a NULL terminated string.</span>
<a name="l00147"></a>00147 <span class="comment"> * See also \ref imDataType.</span>
<a name="l00148"></a>00148 <span class="comment"> *</span>
<a name="l00149"></a>00149 <span class="comment"> * \verbatim ifile:SetAttribute(attrib: string, data_type: number, data: table of numbers or string) [in Lua 5] \endverbatim</span>
<a name="l00150"></a>00150 <span class="comment"> * If data_type is IM_BYTE, as_string can be used as data.</span>
<a name="l00151"></a>00151 <span class="comment"> * \ingroup file */</span>
<a name="l00152"></a>00152 <span class="keywordtype">void</span> <a class="code" href="group__file.html#gaa92597db0072b394e9c38e5ff1127b98">imFileSetAttribute</a>(<a class="code" href="struct__imFile.html" title="Image File Structure (SDK Use Only).">imFile</a>* ifile, <span class="keyword">const</span> <span class="keywordtype">char</span>* attrib, <span class="keywordtype">int</span> data_type, <span class="keywordtype">int</span> count, <span class="keyword">const</span> <span class="keywordtype">void</span>* data);
<a name="l00153"></a>00153 <span class="comment"></span>
<a name="l00154"></a>00154 <span class="comment">/** Returns an extended attribute. \n</span>
<a name="l00155"></a>00155 <span class="comment"> * Returns NULL if not found. data_type and count can be NULL.</span>
<a name="l00156"></a>00156 <span class="comment"> * See also \ref imDataType.</span>
<a name="l00157"></a>00157 <span class="comment"> *</span>
<a name="l00158"></a>00158 <span class="comment"> * \verbatim ifile:GetAttribute(attrib: string, [as_string: boolean]) -&gt; data: table of numbers or string, data_type: number [in Lua 5] \endverbatim</span>
<a name="l00159"></a>00159 <span class="comment"> * If data_type is IM_BYTE, as_string can be used to return a string instead of a table.</span>
<a name="l00160"></a>00160 <span class="comment"> * \ingroup file */</span>
<a name="l00161"></a>00161 <span class="keyword">const</span> <span class="keywordtype">void</span>* <a class="code" href="group__file.html#ga75ee89c40ac9dcd102de6e595b54192a">imFileGetAttribute</a>(<a class="code" href="struct__imFile.html" title="Image File Structure (SDK Use Only).">imFile</a>* ifile, <span class="keyword">const</span> <span class="keywordtype">char</span>* attrib, <span class="keywordtype">int</span> *data_type, <span class="keywordtype">int</span> *count);
<a name="l00162"></a>00162 <span class="comment"></span>
<a name="l00163"></a>00163 <span class="comment">/** Returns a list of the attribute names. \n</span>
<a name="l00164"></a>00164 <span class="comment"> * &quot;attrib&quot; must contain room enough for &quot;attrib_count&quot; names. Use &quot;attrib=NULL&quot; to return only the count.</span>
<a name="l00165"></a>00165 <span class="comment"> *</span>
<a name="l00166"></a>00166 <span class="comment"> * \verbatim ifile:GetAttributeList() -&gt; data: table of strings [in Lua 5] \endverbatim</span>
<a name="l00167"></a>00167 <span class="comment"> * \ingroup file */</span>
<a name="l00168"></a>00168 <span class="keywordtype">void</span> <a class="code" href="group__file.html#ga7c0479cf6078b88eafd37d0c19624371">imFileGetAttributeList</a>(<a class="code" href="struct__imFile.html" title="Image File Structure (SDK Use Only).">imFile</a>* ifile, <span class="keywordtype">char</span>** attrib, <span class="keywordtype">int</span> *attrib_count);
<a name="l00169"></a>00169 <span class="comment"></span>
<a name="l00170"></a>00170 <span class="comment">/** Returns the pallete if any. \n</span>
<a name="l00171"></a>00171 <span class="comment"> * &quot;palette&quot; must be a 256 colors alocated array. \n</span>
<a name="l00172"></a>00172 <span class="comment"> * Returns zero in &quot;palette_count&quot; if there is no palette. &quot;palette_count&quot; is &gt;0 and &lt;=256.</span>
<a name="l00173"></a>00173 <span class="comment"> *</span>
<a name="l00174"></a>00174 <span class="comment"> * \verbatim ifile:GetPalette() -&gt; palette: imPalette [in Lua 5] \endverbatim</span>
<a name="l00175"></a>00175 <span class="comment"> * \ingroup file */</span>
<a name="l00176"></a>00176 <span class="keywordtype">void</span> <a class="code" href="group__file.html#ga0b7a4dba924784b17a5ef846d4d22d2a">imFileGetPalette</a>(<a class="code" href="struct__imFile.html" title="Image File Structure (SDK Use Only).">imFile</a>* ifile, <span class="keywordtype">long</span>* palette, <span class="keywordtype">int</span> *palette_count);
<a name="l00177"></a>00177 <span class="comment"></span>
<a name="l00178"></a>00178 <span class="comment">/** Changes the pallete. \n</span>
<a name="l00179"></a>00179 <span class="comment"> *  &quot;palette_count&quot; is &gt;0 and &lt;=256.</span>
<a name="l00180"></a>00180 <span class="comment"> *</span>
<a name="l00181"></a>00181 <span class="comment"> * \verbatim ifile:SetPalette(palette: imPalette) [in Lua 5] \endverbatim</span>
<a name="l00182"></a>00182 <span class="comment"> * \ingroup file */</span>
<a name="l00183"></a>00183 <span class="keywordtype">void</span> <a class="code" href="group__file.html#ga446462ec406002fcffbcd0611deca0da">imFileSetPalette</a>(<a class="code" href="struct__imFile.html" title="Image File Structure (SDK Use Only).">imFile</a>* ifile, <span class="keywordtype">long</span>* palette, <span class="keywordtype">int</span> palette_count);
<a name="l00184"></a>00184 <span class="comment"></span>
<a name="l00185"></a>00185 <span class="comment">/** Reads the image header if any and returns image information. \n</span>
<a name="l00186"></a>00186 <span class="comment"> * Reads also the extended image attributes, so other image attributes will be available only after calling this function. \n</span>
<a name="l00187"></a>00187 <span class="comment"> * Returns an error code.</span>
<a name="l00188"></a>00188 <span class="comment"> * index specifies the image number between 0 and image_count-1. \n</span>
<a name="l00189"></a>00189 <span class="comment"> * Some drivers reads only in sequence, so &quot;index&quot; can be ignored by the format driver. \n</span>
<a name="l00190"></a>00190 <span class="comment"> * Any parameters can be NULL. This function must be called at least once, check each format documentation.</span>
<a name="l00191"></a>00191 <span class="comment"> * See also \ref imErrorCodes, \ref imDataType, \ref imColorSpace and \ref imColorModeConfig.</span>
<a name="l00192"></a>00192 <span class="comment"> *</span>
<a name="l00193"></a>00193 <span class="comment"> * \verbatim ifile:ReadImageInfo([index: number]) -&gt; error: number, width: number, height: number, file_color_mode: number, file_data_type: number [in Lua 5] \endverbatim</span>
<a name="l00194"></a>00194 <span class="comment"> * Default index is 0.</span>
<a name="l00195"></a>00195 <span class="comment"> * \ingroup file */</span>
<a name="l00196"></a>00196 <span class="keywordtype">int</span> <a class="code" href="group__file.html#ga4b32f79f7f596d70701cfe7978b6c35b">imFileReadImageInfo</a>(<a class="code" href="struct__imFile.html" title="Image File Structure (SDK Use Only).">imFile</a>* ifile, <span class="keywordtype">int</span> index, <span class="keywordtype">int</span> *width, <span class="keywordtype">int</span> *height, <span class="keywordtype">int</span> *file_color_mode, <span class="keywordtype">int</span> *file_data_type);
<a name="l00197"></a>00197 <span class="comment"></span>
<a name="l00198"></a>00198 <span class="comment">/** Writes the image header. Writes the file header at the first time it is called.</span>
<a name="l00199"></a>00199 <span class="comment"> * Writes also the extended image attributes. \n</span>
<a name="l00200"></a>00200 <span class="comment"> * Must call imFileSetPalette and set other attributes before calling this function. \n</span>
<a name="l00201"></a>00201 <span class="comment"> * In some formats the color space will be converted to match file format specification. \n</span>
<a name="l00202"></a>00202 <span class="comment"> * Returns an error code. This function must be called at least once, check each format documentation.</span>
<a name="l00203"></a>00203 <span class="comment"> * See also \ref imErrorCodes, \ref imDataType, \ref imColorSpace and \ref imColorModeConfig.</span>
<a name="l00204"></a>00204 <span class="comment"> *</span>
<a name="l00205"></a>00205 <span class="comment"> * \verbatim ifile:WriteImageInfo(width: number, height: number, user_color_mode: number, user_data_type: number) -&gt; error: number [in Lua 5] \endverbatim</span>
<a name="l00206"></a>00206 <span class="comment"> * \ingroup file */</span>
<a name="l00207"></a>00207 <span class="keywordtype">int</span> <a class="code" href="group__file.html#ga2818bcbd626b5706ed585357a586fe68">imFileWriteImageInfo</a>(<a class="code" href="struct__imFile.html" title="Image File Structure (SDK Use Only).">imFile</a>* ifile, <span class="keywordtype">int</span> width, <span class="keywordtype">int</span> height, <span class="keywordtype">int</span> user_color_mode, <span class="keywordtype">int</span> user_data_type);
<a name="l00208"></a>00208 <span class="comment"></span>
<a name="l00209"></a>00209 <span class="comment">/** Reads the image data with or without conversion. \n</span>
<a name="l00210"></a>00210 <span class="comment"> * The data can be converted to bitmap when reading.</span>
<a name="l00211"></a>00211 <span class="comment"> * Data type conversion to byte will always scan for min-max then scale to 0-255, </span>
<a name="l00212"></a>00212 <span class="comment"> * except integer values that min-max are already between 0-255. Complex to real conversions will use the magnitude. \n</span>
<a name="l00213"></a>00213 <span class="comment"> * Color mode flags contains packed, alpha and top-botttom information.</span>
<a name="l00214"></a>00214 <span class="comment"> * If flag is 0 means unpacked, no alpha and bottom up. If flag is -1 the file original flags are used. \n</span>
<a name="l00215"></a>00215 <span class="comment"> * Returns an error code.</span>
<a name="l00216"></a>00216 <span class="comment"> * See also \ref imErrorCodes, \ref imDataType, \ref imColorSpace and \ref imColorModeConfig.</span>
<a name="l00217"></a>00217 <span class="comment"> *</span>
<a name="l00218"></a>00218 <span class="comment"> * \verbatim ifile:ReadImageData(data: userdata, convert2bitmap: boolean, color_mode_flags: number) -&gt; error: number [in Lua 5] \endverbatim</span>
<a name="l00219"></a>00219 <span class="comment"> * \ingroup file */</span>
<a name="l00220"></a>00220 <span class="keywordtype">int</span> <a class="code" href="group__file.html#gaa73397dc74a58704586595f0edb8ef34">imFileReadImageData</a>(<a class="code" href="struct__imFile.html" title="Image File Structure (SDK Use Only).">imFile</a>* ifile, <span class="keywordtype">void</span>* data, <span class="keywordtype">int</span> convert2bitmap, <span class="keywordtype">int</span> color_mode_flags);
<a name="l00221"></a>00221                            <span class="comment"></span>
<a name="l00222"></a>00222 <span class="comment">/** Writes the image data. \n</span>
<a name="l00223"></a>00223 <span class="comment"> * Returns an error code.</span>
<a name="l00224"></a>00224 <span class="comment"> *</span>
<a name="l00225"></a>00225 <span class="comment"> * \verbatim ifile:WriteImageData(data: userdata) -&gt; error: number [in Lua 5] \endverbatim</span>
<a name="l00226"></a>00226 <span class="comment"> * \ingroup file */</span>
<a name="l00227"></a>00227 <span class="keywordtype">int</span> <a class="code" href="group__file.html#gaf81a086ffc143d70e0ef24e876aaeed3">imFileWriteImageData</a>(<a class="code" href="struct__imFile.html" title="Image File Structure (SDK Use Only).">imFile</a>* ifile, <span class="keywordtype">void</span>* data);
<a name="l00228"></a>00228 
<a name="l00229"></a>00229 
<a name="l00230"></a>00230 
<a name="l00231"></a>00231 <span class="comment"></span>
<a name="l00232"></a>00232 <span class="comment">/** Registers all the internal formats. \n</span>
<a name="l00233"></a>00233 <span class="comment"> * It is automatically called internally when a format is accessed, </span>
<a name="l00234"></a>00234 <span class="comment"> * but can be called to force the internal formats to be registered before other formats.</span>
<a name="l00235"></a>00235 <span class="comment"> * Notice that additional formats when registered will be registered before the internal formats </span>
<a name="l00236"></a>00236 <span class="comment"> * if imFormatRegisterInternal is not called yet. \n</span>
<a name="l00237"></a>00237 <span class="comment"> * To control the register order is usefull when two format drivers handle the same format. </span>
<a name="l00238"></a>00238 <span class="comment"> * The first registered format will always be used first.</span>
<a name="l00239"></a>00239 <span class="comment"> * \ingroup format */</span>
<a name="l00240"></a>00240 <span class="keywordtype">void</span> <a class="code" href="group__format.html#ga00301e0acd0428d67469d0dc5e982a56">imFormatRegisterInternal</a>(<span class="keywordtype">void</span>);
<a name="l00241"></a>00241 <span class="comment"></span>
<a name="l00242"></a>00242 <span class="comment">/** Remove all registered formats. Call this if you are checking memory leaks.</span>
<a name="l00243"></a>00243 <span class="comment"> * \ingroup format */</span>
<a name="l00244"></a>00244 <span class="keywordtype">void</span> <a class="code" href="group__format.html#gabc13bfb2d68cd8e047b5b8076b9767b8">imFormatRemoveAll</a>(<span class="keywordtype">void</span>);
<a name="l00245"></a>00245 <span class="comment"></span>
<a name="l00246"></a>00246 <span class="comment">/** Returns a list of the registered formats. \n</span>
<a name="l00247"></a>00247 <span class="comment"> * format_list is an array of format identifiers. </span>
<a name="l00248"></a>00248 <span class="comment"> * Each format identifier is 10 chars max, maximum of 50 formats. </span>
<a name="l00249"></a>00249 <span class="comment"> * You can use &quot;char* format_list[50]&quot;. </span>
<a name="l00250"></a>00250 <span class="comment"> *</span>
<a name="l00251"></a>00251 <span class="comment"> * \verbatim im.FormatList() -&gt; format_list: table of strings [in Lua 5] \endverbatim</span>
<a name="l00252"></a>00252 <span class="comment"> * \ingroup format */</span>
<a name="l00253"></a>00253 <span class="keywordtype">void</span> <a class="code" href="group__format.html#ga8670a65b6c7ef3267a8c365f7a387bf5">imFormatList</a>(<span class="keywordtype">char</span>** format_list, <span class="keywordtype">int</span> *format_count);
<a name="l00254"></a>00254 <span class="comment"></span>
<a name="l00255"></a>00255 <span class="comment">/** Returns the format description. \n</span>
<a name="l00256"></a>00256 <span class="comment"> * Format description is 50 chars max. \n</span>
<a name="l00257"></a>00257 <span class="comment"> * Extensions are separated like &quot;*.tif;*.tiff;&quot;, 50 chars max. \n</span>
<a name="l00258"></a>00258 <span class="comment"> * Returns an error code. The parameters can be NULL, except format.</span>
<a name="l00259"></a>00259 <span class="comment"> * See also \ref format.</span>
<a name="l00260"></a>00260 <span class="comment"> *</span>
<a name="l00261"></a>00261 <span class="comment"> * \verbatim im.FormatInfo(format: string) -&gt; error: number, desc: string, ext: string, can_sequence: boolean [in Lua 5] \endverbatim</span>
<a name="l00262"></a>00262 <span class="comment"> * \ingroup format */</span>
<a name="l00263"></a>00263 <span class="keywordtype">int</span> <a class="code" href="group__format.html#ga13e1af5f3c54bad1fb5bfdce387535db">imFormatInfo</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* format, <span class="keywordtype">char</span>* desc, <span class="keywordtype">char</span>* ext, <span class="keywordtype">int</span> *can_sequence);
<a name="l00264"></a>00264 <span class="comment"></span>
<a name="l00265"></a>00265 <span class="comment">/** Returns the format information of the third party library used to support the format. \n</span>
<a name="l00266"></a>00266 <span class="comment"> * Format extra is 50 chars max. \n</span>
<a name="l00267"></a>00267 <span class="comment"> * Returns an error code. </span>
<a name="l00268"></a>00268 <span class="comment"> * See also \ref format.</span>
<a name="l00269"></a>00269 <span class="comment"> *</span>
<a name="l00270"></a>00270 <span class="comment"> * \verbatim im.FormatInfoExtra(format: string) -&gt; error: number, extra: string [in Lua 5] \endverbatim</span>
<a name="l00271"></a>00271 <span class="comment"> * \ingroup format */</span>
<a name="l00272"></a>00272 <span class="keywordtype">int</span> <a class="code" href="group__format.html#ga404c568765598a6698a2eb62448568c6">imFormatInfoExtra</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* format, <span class="keywordtype">char</span>* extra);
<a name="l00273"></a>00273 <span class="comment"></span>
<a name="l00274"></a>00274 <span class="comment">/** Returns the format compressions. \n</span>
<a name="l00275"></a>00275 <span class="comment"> * Compressions are 20 chars max each, maximum of 50 compressions. You can use &quot;char* comp[50]&quot;. \n</span>
<a name="l00276"></a>00276 <span class="comment"> * color_mode and data_type are optional, use -1 to ignore them. \n</span>
<a name="l00277"></a>00277 <span class="comment"> * If you use them they will select only the allowed compressions checked like in \ref imFormatCanWriteImage. \n</span>
<a name="l00278"></a>00278 <span class="comment"> * Returns an error code.</span>
<a name="l00279"></a>00279 <span class="comment"> * See also \ref format, \ref imErrorCodes, \ref imDataType, \ref imColorSpace and \ref imColorModeConfig.</span>
<a name="l00280"></a>00280 <span class="comment"> *</span>
<a name="l00281"></a>00281 <span class="comment"> * \verbatim im.FormatCompressions(format: string, [color_mode: number], [data_type: number]) -&gt; error: number, comp: table of strings [in Lua 5] \endverbatim</span>
<a name="l00282"></a>00282 <span class="comment"> * \ingroup format */</span>
<a name="l00283"></a>00283 <span class="keywordtype">int</span> <a class="code" href="group__format.html#ga684633c919d8ab0f527e8ac9c1823f18">imFormatCompressions</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* format, <span class="keywordtype">char</span>** comp, <span class="keywordtype">int</span> *comp_count, <span class="keywordtype">int</span> color_mode, <span class="keywordtype">int</span> data_type);
<a name="l00284"></a>00284 <span class="comment"></span>
<a name="l00285"></a>00285 <span class="comment">/** Checks if the format suport the given image class at the given compression. \n</span>
<a name="l00286"></a>00286 <span class="comment"> * Returns an error code.</span>
<a name="l00287"></a>00287 <span class="comment"> * See also \ref format, \ref imErrorCodes, \ref imDataType, \ref imColorSpace and \ref imColorModeConfig.</span>
<a name="l00288"></a>00288 <span class="comment"> *</span>
<a name="l00289"></a>00289 <span class="comment"> * \verbatim im.FormatCanWriteImage(format: string, compression: string, color_mode: number, data_type: number) -&gt; can_write: boolean [in Lua 5] \endverbatim</span>
<a name="l00290"></a>00290 <span class="comment"> * \ingroup format */</span>
<a name="l00291"></a>00291 <span class="keywordtype">int</span> <a class="code" href="group__format.html#gaa57221dd2e24a26113393e06c122de67">imFormatCanWriteImage</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* format, <span class="keyword">const</span> <span class="keywordtype">char</span>* compression, <span class="keywordtype">int</span> color_mode, <span class="keywordtype">int</span> data_type);
<a name="l00292"></a>00292 
<a name="l00293"></a>00293 
<a name="l00294"></a>00294 <span class="preprocessor">#if defined(__cplusplus)</span>
<a name="l00295"></a>00295 <span class="preprocessor"></span>}
<a name="l00296"></a>00296 <span class="preprocessor">#endif</span>
<a name="l00297"></a>00297 <span class="preprocessor"></span>
<a name="l00298"></a>00298 <span class="preprocessor">#include &quot;<a class="code" href="old__im_8h.html" title="Old API.">old_im.h</a>&quot;</span>
<a name="l00299"></a>00299 
<a name="l00300"></a>00300 <span class="preprocessor">#endif</span>
</pre></div></div>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Tue May 15 2012 12:06:06 for IM by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.1 </small></address>
</body>
</html>
